<loader-spinner-navbar *ngIf="loaderNavbar"></loader-spinner-navbar>
<app-header appTitle="reporte">
  <button
    type="button"
    (click)="excelExport()"
  >
    Exportar Excel
  </button>
  <button
    type="button"
    (click)="onFilter()">
    Filtrar
  </button> 
</app-header>
<app-body [breadCrumbTree]="breadCrumbTree">
  
  <advanced-filter>
    <form [formGroup]="formFilter">
      <div class="form-row">
        <div class="form-group col-lg-3">
          <label for="fechaInicial">Fecha inicial</label>
          <input
            type="date"
            class="form-control"
            id="fechaInicial"
            formControlName="fechaInicial"
          />
        </div>
        <div class="form-group col-lg-3">
          <label for="fechaFinal">Fecha final</label>
          <input
            type="date"
            class="form-control"
            id="fechaFinal"
            formControlName="fechaFinal"
          />
        </div>
        <div class="form-group col-lg-3">
          <label for="nombreVendedor">Nombre del vendedor</label>
          <select
            class="form-control custom-select"
            id="nombreVendedor"
            formControlName="nombreVendedor"
          >
            <option value="">Seleccionar vendedor</option>
            <option *ngFor="let vendedor of vendedores" [value]="vendedor.id">
              {{ vendedor.nombre }}
            </option>
          </select>
        </div>
        <div class="form-group col-lg-3">
          <label for="listaSucursales">Lista de sucursales</label>
          <select
            class="form-control custom-select"
            id="listaSucursales"
            formControlName="listaSucursales"
          >
            <option value="">Seleccionar sucursal</option>
            <!-- Agrega opciones de la lista de sucursales aquí -->
          </select>
        </div>
        <div class="form-group col-lg-3">
          <label for="titulo">Título</label>
          <select
            class="form-control custom-select"
            id="titulo"
            formControlName="titulo"
          >
            <option value="">Seleccionar título</option>
            <!-- Agrega opciones de títulos aquí -->
          </select>
        </div>
      </div>
      <div class="form-row">
        <!-- Agrega aquí más campos de filtrado avanzado si es necesario -->
      </div>
      
    </form>
    
  </advanced-filter>
  
 
  <div class="row mt-3" *ngIf="dataLoaded && clientes.length > 0">
    <div [ngClass]="{'col-12': !showDetailPanel, 'col-7 pr-0': showDetailPanel}">
      <custom-table [config]="tableConfig">
        <ng-template #thead let-thead>
          <tr>
            <th scope="col"></th>
            <th
              
              class="text-center hover">
              <thead-sorter value="Código de clientes"></thead-sorter>
            </th>
            <th
              scope="col"
              class="hover">
              <thead-sorter value="Nombre" ></thead-sorter>
            </th>
            <th
              scope="col"
              class="hover">
              <thead-sorter value="Razón social" ></thead-sorter>
            </th>
            <th>
              <thead-sorter value="Estado"></thead-sorter>
            </th>
          </tr>
        </ng-template>
        <ng-template #tbody let-tbody>
          <tr *ngFor="let cliente of clientes" [class.table-active]="cliente.codigo_cliente == clienteSelecionado">
            
          </tr>
        </ng-template>
      </custom-table>
      <div class="d-flex justify-content-center mt-3" *ngIf="clientes[0]['total'] > itemsPerPage">
        <pagination
          [maxSize]="maxSize"
          [(totalItems)]="totalItems"
          (pageChanged)="onPageChanged($event)"
          [(itemsPerPage)]="itemsPerPage"
          [boundaryLinks]="true"
          [(ngModel)]="currentPage"
          previousText="&lsaquo;"
          nextText="&rsaquo;"
          firstText="&laquo;"
          lastText="&raquo;">
        </pagination>
      </div>
    </div>
    <div class="col-5" [hidden]="!showDetailPanel">
      <div class="sticky-top">
        <detail-panel>
          <tabset>
            <tab heading="Datos de registro">
              <div class="border-right border-left border-bottom px-3 pt-3">
                <div *ngIf="dadosCadastraisLoaded && !dadosCadastraisEmpty">
                  <div class="form-row">
                    <div class="form-group col-lg-6" *ngIf="dadosCadastrais.tipoPessoa == 'F'">
                      <label>CPF</label>
                      <div *ngIf="dadosCadastrais.cpf == null">NO INFORMADO</div>
                      <div *ngIf="dadosCadastrais.cpf != null">{{ dadosCadastrais.cpf }}</div>
                    </div>
                    <div class="form-group col-lg-6" *ngIf="dadosCadastrais.tipoPessoa == 'J'">
                      <label>CNPJ</label>
                      <div *ngIf="dadosCadastrais.cnpj == null">NO INFORMADO</div>
                      <div *ngIf="dadosCadastrais.cnpj != null">{{ dadosCadastrais.cnpj }}</div>
                    </div>
                    <div class="form-group col-lg-6">
                      <label>Nombre de fantasía</label>
                      <div *ngIf="dadosCadastrais.nomeFantasia == null">NO INFORMADO</div>
                      <div *ngIf="dadosCadastrais.nomeFantasia != null">{{ dadosCadastrais.nomeFantasia }}</div>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-group col">
                      <label>Razón social</label>
                      <div *ngIf="dadosCadastrais.razaoSocial == null">NO INFORMADO</div>
                      <div *ngIf="dadosCadastrais.razaoSocial != null">{{ dadosCadastrais.razaoSocial }}</div>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-group col">REPORTE
                      <label>Dirección</label>
                      <div *ngIf="dadosCadastrais.endereco == null">NO INFORMADO</div>
                      <div *ngIf="dadosCadastrais.endereco != null">{{ dadosCadastrais.endereco }}</div>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-group col-lg-6">
                      <label>Barrio</label>
                      <div *ngIf="dadosCadastrais.bairro == null">NO INFORMADO</div>
                      <div *ngIf="dadosCadastrais.bairro != null">{{ dadosCadastrais.bairro }}</div>
                    </div>
                    <div class="form-group col-lg-6">
                      <label>CEP</label>
                      <div *ngIf="dadosCadastrais.cep == null">NO INFORMADO</div>
                      <div *ngIf="dadosCadastrais.cep != null">{{ dadosCadastrais.cep }}</div>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-group col-lg-6">
                      <label>Ciudad</label>
                      <div *ngIf="dadosCadastrais.cidade == null">NO INFORMADO</div>
                      <div *ngIf="dadosCadastrais.cidade != null">{{ dadosCadastrais.cidade }}</div>
                    </div>
                    <div class="form-group col-lg-6">
                      <label>Estado</label>
                      <div *ngIf="dadosCadastrais.uf == null">NO INFORMADO</div>
                      <div *ngIf="dadosCadastrais.uf != null">{{ dadosCadastrais.uf }}</div>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-group col">
                      <label>Asegurado</label>
                      <div *ngIf="dadosCadastrais.segurado != ''">Si</div>
                      <div *ngIf="dadosCadastrais.segurado == ''">NO</div>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-group col-lg-6">
                      <label>Vendedor</label>
                      <div *ngIf="dadosCadastrais.vendedor == null">NO INFORMADO</div>
                      <div *ngIf="dadosCadastrais.vendedor != null">{{ dadosCadastrais.vendedor }}</div>
                    </div>
                    <div class="form-group col-lg-6">
                      <label>Escritório</label>
                      <div *ngIf="dadosCadastrais.escritorio == null">NO INFORMADO</div>
                      <div *ngIf="dadosCadastrais.escritorio != null">{{ dadosCadastrais.escritorio }}</div>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-group col-lg-4" *ngIf="dadosCadastrais.codSAP != '' && dadosCadastrais.codSAP != null">
                      <label>Código DBA</label>
                      <div>{{ dadosCadastrais.codSAP }}</div>
                    </div>
                    <div class="form-group col-lg-4" *ngIf="dadosCadastrais.escritorioDba != '' && dadosCadastrais.escritorioDba != null">
                      <label>Escritorio</label>
                      <div>{{ dadosCadastrais.escritorioDba }}</div>
                    </div>
                    <div class="form-group col-lg-4" *ngIf="dadosCadastrais.ultimaCompraDba != '' && dadosCadastrais.ultimaCompraDba != null">
                      <label>Última compra</label>
                      <div>{{ dadosCadastrais.ultimaCompraDba }}</div>
                    </div>
                  </div>
                </div>
                <div class="mb-3" *ngIf="dadosCadastraisLoaded && dadosCadastraisEmpty">
                  <empty-result message="Nenhuma informação encontrada"></empty-result>
                </div>
                <div class="d-flex justify-content-center mb-3" *ngIf="!dadosCadastraisLoaded">
                  <div class="spinner-border text-dark"></div>
                </div>
              </div>
            </tab>
            <tab heading="Contatos">
              <div class="border-right border-left border-bottom px-3 pt-3">
                <div *ngIf="contatosLoaded && !contatosEmpty">
                  <div class="form-row" *ngFor="let contato of contatos">
                    <div class="form-group col">
                      <label>{{ contato.tipoContato }}</label>
                      <div>
                        <span *ngIf="contato.nomeContato.length > 1" class="mr-1">{{ contato.nomeContato }}:</span>
                        <span
                          *ngIf="(contato.tipoContato != 'Email NFe') &&
                                (contato.tipoContato != 'E-mail NFe') &&
                                (contato.tipoContato != 'MalaDireta') &&
                                (contato.tipoContato != 'E-Mail')">
                          {{ contato.contato }}
                        </span>
                        <span
                          *ngIf="(contato.tipoContato == 'Email NFe') ||
                                (contato.tipoContato == 'E-mail NFe') ||
                                (contato.tipoContato == 'MalaDireta') ||
                                (contato.tipoContato == 'E-Mail')">
                          <a [href]="'mailto:' + contato.contato">{{ contato.contato | lowercase }}</a>
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="mb-3" *ngIf="contatosLoaded && contatosEmpty">
                  <empty-result message="Ningun contacto encontrado"></empty-result>
                </div>
                <div class="d-flex justify-content-center mb-3" *ngIf="!contatosLoaded">
                  <div class="spinner-border text-dark"></div>
                </div>
              </div>
            </tab>
          </tabset>
        </detail-panel>
      </div>
    </div>
  </div>
</app-body>
