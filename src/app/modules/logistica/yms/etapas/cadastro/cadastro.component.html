<loader-spinner-full-screen *ngIf="loading"></loader-spinner-full-screen>
<loader-spinner-navbar [hidden]="!loadingNavBar"></loader-spinner-navbar>
<app-header appTitle="Etapas">
  <button 
    [disabled]="form.valid === false || loadingNavBar === true"
    (click)="postEtapas()"
    >
    Salvar
  </button>
</app-header>
<app-body [breadCrumbTree]="breadCrumbTree">
  <form [formGroup]="form" autocomplete="off" [hidden] = "loading">
    <fieldset  class="col-12">
      <fieldset class="border rounded shadow-sm col-8 pt-2 mx-auto">
        <legend>Dados da Etapa</legend>
        <div class="form-row justify-content-center">
          <div class="form-group col-md-12 pl-0">
            <label for="NM_ETAP">Descrição</label>
            <input
              type="text"
              class="form-control"
              id="NM_ETAP"
              formControlName="NM_ETAP"
              placeholder="Digite..."
              [ngClass]="onFieldError('NM_ETAP') + ' ' + onFieldRequired('NM_ETAP')"
            />
            <invalid-form-control [show]="onFieldInvalid('NM_ETAP')" message="Descrição é obrigatório."></invalid-form-control>
          </div>
        </div>
        <div class="form-row justify-content-center">
          <div class="form-group col-md-6 pl-0">
            <label for="tiposEtapa">Tipo de etapa</label>
            <ng-select
              [searchable]="true"
              [clearable]="true"
              [items]="tiposEtapa"
              [virtualScroll]="true"
              placeholder="Selecione..."
              [loading]="loadingTiposEtapa"
              labelForId="tiposEtapa"
              bindLabel="NM_ETAP_TIPO"
              bindValue="UUID_LOGI_YMS_ETAP_TIPO"
              id="tiposEtapa"
              formControlName="UUID_LOGI_YMS_ETAP_TIPO"
              [ngClass]="onFieldError('UUID_LOGI_YMS_ETAP_TIPO') + ' ' + onFieldRequired('UUID_LOGI_YMS_ETAP_TIPO')">
              >
            </ng-select>
            <invalid-form-control [show]="onFieldInvalid('UUID_LOGI_YMS_ETAP_TIPO')" message="Circuito é obrigatório."></invalid-form-control>
          </div>
          <div class="form-group col-md-6 pl-0">
            <label for="IN_STAT">Sigla</label>
            <ng-select
            [searchable]="true"
            [clearable]="false"
            [items]="tipos"
            [virtualScroll]="true"
            labelForId="tipo"
            bindLabel="nome"
            bindValue="cod"
            id="tipo"
            formControlName="SG_ETAP"
            placeholder="Selecione..."
            [ngClass]="onFieldError('SG_ETAP') + ' ' + onFieldRequired('SG_ETAP')"
          >
          </ng-select>
          <invalid-form-control [show]="onFieldInvalid('SG_ETAP')" message="Tipo de circuito é obrigatório."></invalid-form-control>

          </div>
        </div>
      </fieldset>
      <br>
      <br>
      <fieldset class="border rounded shadow-sm col-8 pt-2 mx-auto">
        <legend>Observação</legend>
        <div class="form-row justify-content-center">
          <div class="form-group col">
            <label for="DS_OBSE" >Observação:</label>
            <textarea class="form-control" id="DS_OBSE" formControlName="DS_OBSE" rows="3"></textarea>
          </div>
        </div>
        <br>
      </fieldset>
    </fieldset>
  </form>
</app-body>